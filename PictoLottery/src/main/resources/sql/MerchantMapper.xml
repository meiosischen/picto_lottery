<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.picto.dao.MerchantDao">
    <sql id="queryMerchantColumn">
        select ID AS id,
        merchant_name AS merchantName,
        brand AS brand,
        industry_type AS industryType,
        phone AS phone,
        mobile AS mobile,
        address AS address,
        volumn AS volumn,
        main_business AS mainBusiness,
        remark AS remark,
        lottery_link AS lotteryLink,
        lottery_qrcode AS lotteryQrcode,
        query_link AS queryLink,
        main_advert AS mainAdvert,
        banner_advert AS bannerAdvert,
        query_advert AS queryAdvert,
        lottery_channel AS lotteryChannel,
        merchant_qrcode AS merchantQrcode,
        state AS state,
        create_time AS createTime,
        update_time AS updateTime,
        save_type AS saveType,
        is_validate_openid AS isValidateOpenid,
        treasure_map AS treasureMap,
        treasure_text1 AS treasureText1,
        treasure_text2 AS treasureText2
        from merchant
    </sql>

    <select id="queryMerchantById" resultType="com.picto.entity.Merchant">
        <include refid="queryMerchantColumn" />
        where id = #{id}
    </select>

    <insert id="addMerchant" keyProperty="id" useGeneratedKeys="true" parameterType="com.picto.entity.Merchant">
        insert into merchant(merchant_name, brand, industry_type, phone, mobile, address, volumn, main_business, remark, lottery_link, lottery_qrcode, query_link, banner_advert, query_advert, lottery_channel, merchant_qrcode, state, create_time, update_time, save_type, treasure_map, treasure_text1, treasure_text2)
        values(#{merchantName}, #{brand}, #{industryType}, #{phone}, #{mobile}, #{address}, #{volumn}, #{mainBusiness}, #{remark}, #{lotteryLink}, #{lotteryQrcode}, #{queryLink}, #{bannerAdvert}, #{queryAdvert}, #{lotteryChannel}, #{merchantQrcode}, #{state}, #{createTime}, #{updateTime}, #{saveType}, #{treasureMap}, #{treasureText1}, #{treasureText2})
    </insert>

    <select id="queryAllMerchants" resultType="com.picto.entity.Merchant">
        <include refid="queryMerchantColumn" />
    </select>

    <update id="updateMerchant">
        update merchant
        set update_time = #{updateTime}
        <if test="merchantName != null">
            , merchant_name = #{merchantName}
         </if>
        <if test="brand != null">
            , brand = #{brand}
        </if>
        <if test="phone != null">
            , phone = #{phone}
        </if>
        <if test="address != null">
            , address = #{address}
        </if>
        <if test="volumn != null">
            , volumn = #{volumn}
        </if>
        <if test="mainBusiness != null">
            , main_business = #{mainBusiness}
        </if>
        <if test="remark != null">
            , remark = #{remark}
        </if>
        <if test="mainAdvert != null">
            , main_advert = #{mainAdvert}
        </if>
        <if test="bannerAdvert != null">
            , banner_advert = #{bannerAdvert}
        </if>
        <if test="queryAdvert != null">
            , query_advert = #{queryAdvert}
        </if>
        <if test="merchantQrcode != null">
            , merchant_qrcode = #{merchantQrcode}
        </if>
        <if test="saveType != null">
            , save_type = #{saveType}
        </if>
        <if test="lotteryLink != null">
            , lottery_link = #{lotteryLink}
        </if>
        <if test="lotteryQrcode != null">
            , lottery_qrcode = #{lotteryQrcode}
        </if>
        <if test="state != null">
            , state = #{state}
        </if>
        <if test="treasureMap != null">
            , treasure_map = #{treasureMap}
        </if>
        <if test="treasureText1 != null">
            , treasure_text1 = #{treasureText1}
        </if>
        <if test="treasureText2 != null">
            , treasure_text2 = #{treasureText2}
        </if>        
        where id = #{id}
    </update>
</mapper>